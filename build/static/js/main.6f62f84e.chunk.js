(this["webpackJsonpreact-admin-client"]=this["webpackJsonpreact-admin-client"]||[]).push([[0],{190:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(31),s=n.n(c),i=n(23),o=n(24),l=n(26),u=n(25),j=n(55),h=n(28),b=n(58),d=n.n(b),p=n(79),O=n(177),m=n(307),f=n(308),x=n(100),g=n(39),y=n(310),v=n(311),k=(n(189),n(190),n.p+"static/media/login.f6487143.png"),w=n(97),C=n.n(w);function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(r,a){var c;c="GET"===n?C.a.get(e,{params:t}):C.a.post(e,t),console.log("\u8bf7\u6c42\u51fa\u9519\u4e86"),console.log(c),c.then((function(e){r(e.data)})).catch((function(e){console.log(e),O.b.error("\u8bf7\u6c42\u51fa\u9519\u4e86"+e)}))}))}n(209);var P=function(e,t){return N("/login",{username:e,password:t},"POST")},S=function(e){return N("/manage/category/list",{parentId:e})},F=function(){return C()("http://localhost:3001?district_id=222405&data_type=all&ak=nLXOSwH01Py9umDg9KPzj4X5l3FvGD9R")},I={user:{}},T=n(137),D=n.n(T),_="user_key",M=function(e){D.a.set(_,e)},E=function(){return D.a.get(_)||{}},R=function(){D.a.remove(_)},A=n(7),U=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).formRef=a.a.createRef(),e.getFormData=function(t){var n=e.formRef.current;console.log(n.getFieldsValue())},e.validatePwd=function(e,t){return t?t.length<4?Promise.reject(new Error("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d")):t.length>12?Promise.reject(new Error("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e12\u4f4d")):/^[a-zA-Z0-9_]+$/.test(t)?Promise.resolve():Promise.reject(new Error("\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u4e0b\u5212\u7ebf\u7ec4\u6210")):Promise.reject(new Error("\u8bf7\u8f93\u5165\u5bc6\u7801"))},e.onFinish=function(){var t=Object(p.a)(d.a.mark((function t(n){var r,a,c,s,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.username,a=n.password,t.next=3,P(r,a);case 3:c=t.sent,0===(s=c).status?(O.b.success("\u767b\u5f55\u6210\u529f"),i=s.data,I.user=i,M(i),console.log(e.props),e.props.history.replace("/")):O.b.error(s.msg);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFinishFailed=function(e){console.log("Failed:",e)},e}return Object(o.a)(n,[{key:"render",value:function(){return I.user._id?Object(A.jsx)(h.a,{to:"/"}):Object(A.jsxs)("div",{className:"login",children:[Object(A.jsxs)("header",{className:"login-header",children:[Object(A.jsx)("img",{src:k,alt:"logo"}),Object(A.jsx)("h1",{children:"React\u9879\u76ee\uff1a\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"})]}),Object(A.jsxs)("section",{className:"login-content",children:[Object(A.jsx)("h2",{children:"\u7528\u6237\u767b\u5f55"}),Object(A.jsxs)(m.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,ref:this.formRef,children:[Object(A.jsx)(m.a.Item,{name:"username",rules:[{required:!0,whitespace:!0,message:"\u7528\u6237\u540d\u5fc5\u987b\u8f93\u5165"},{min:4,message:"\u7528\u6237\u540d\u81f3\u5c114\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u81f3\u591a12\u4f4d"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:Object(A.jsx)(f.a,{prefix:Object(A.jsx)(y.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(A.jsx)(m.a.Item,{name:"password",rules:[{validator:this.validatePwd}],children:Object(A.jsx)(f.a,{prefix:Object(A.jsx)(v.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(A.jsx)(m.a.Item,{children:Object(A.jsx)(m.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(A.jsx)(x.a,{children:"Remember me"})})}),Object(A.jsx)(m.a.Item,{children:Object(A.jsx)(g.a,{type:"primary",htmlType:"submit",className:"login-form-button",onClick:this.getFormData,children:"Log in"})})]})]})]})}}]),n}(r.Component),z=n(304),K=n(75),G=n(312),H=n(313),J=(n(294),n.p+"static/media/logo.f6487143.png"),L=[{title:"\u9996\u9875",key:"/home",icon:"home",isPublic:!0},{title:"\u5546\u54c1",key:"/products",icon:"appstore",children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/category",icon:"bars"},{title:"\u5546\u54c1\u7ba1\u7406",key:"/product",icon:"tool"}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:"user"},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:"safety"},{title:"\u56fe\u5f62\u56fe\u8868",key:"/charts",icon:"area-chart",children:[{title:"\u67f1\u5f62\u56fe",key:"/charts/bar",icon:"bar-chart"},{title:"\u6298\u7ebf\u56fe",key:"/charts/line",icon:"line-chart"},{title:"\u997c\u56fe",key:"/charts/pie",icon:"pie-chart"}]},{title:"\u8ba2\u5355\u7ba1\u7406",key:"/order",icon:"windows"}],V=K.a.SubMenu,W=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).getMenuNodes=function(t){return t.reduce((function(t,n){return n.children?t.push(Object(A.jsx)(V,{title:Object(A.jsxs)("span",{children:[Object(A.jsx)(H.a,{}),Object(A.jsx)("span",{children:n.title})]}),children:e.getMenuNodes(n.children)},n.key)):t.push(Object(A.jsx)(K.a.Item,{children:Object(A.jsxs)(j.b,{to:n.key,children:[Object(A.jsx)(G.a,{}),Object(A.jsx)("span",{children:n.title})]})},n.key)),t}),[])},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.location.pathname;return Object(A.jsxs)("div",{className:"left-nav",children:[Object(A.jsx)("div",{}),Object(A.jsxs)(j.b,{to:"/",className:"left-nav-header",children:[Object(A.jsx)("img",{src:J,alt:""}),Object(A.jsx)("h1",{children:"\u7845\u8c37\u540e\u53f0"})]}),Object(A.jsxs)(K.a,{onClick:this.handleClick,style:{width:200},selectedKeys:[e],defaultOpenKeys:["sub1"],mode:"inline",children:[this.getMenuNodes(L),"[ (",Object(A.jsx)(K.a.Item,{children:Object(A.jsxs)(j.b,{to:1,children:[Object(A.jsx)(G.a,{}),Object(A.jsx)("span",{children:1})]})},1),") ]"]})]})}}]),n}(r.Component),X=Object(h.g)(W),Z=n(309),$=n(101);n(295);function q(e){if(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}}var B=n(148);n(296);function Q(e){return Object(A.jsx)("button",Object(B.a)(Object(B.a)({},e),{},{className:"link-button"}))}var Y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={currentTime:q(Date.now()),dayPictureUrl:"",weather:""},e.getTime=function(){setInterval((function(){var t=q(Date.now());e.setState({currentTime:t})}),1e3)},e.logout=function(){Z.a.confirm({title:"Confirm",icon:Object(A.jsx)($.a,{}),content:"\u786e\u5b9a\u9000\u51fa\u5417?",onOk:function(){R(),I.user={},e.props.history.replace("/login")}})},e.getWeather=Object(p.a)(d.a.mark((function t(){var n,r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F();case 2:n=t.sent,r=n.dayPictureUrl,a=n.weather,e.setState({dayPictureUrl:r,weather:a});case 6:case"end":return t.stop()}}),t)}))),e.getTitle=function(){var t,n=e.props.location.pathname;return L.forEach((function(e){if(e.key===n)t=e.title;else if(e.children){var r=e.children.find((function(e){return e.key===n}));r&&(t=r.title)}})),t},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getTime()}},{key:"render",value:function(){var e=I.user.username,t=this.getTitle();return Object(A.jsxs)("div",{className:"header",children:[Object(A.jsxs)("div",{className:"header-top",children:[Object(A.jsxs)("span",{children:["\u6b22\u8fce\uff0c",e]}),Object(A.jsx)(Q,{onClick:this.logout,children:"\u9000\u51fa"})]}),Object(A.jsxs)("div",{className:"header-bottom",children:[Object(A.jsx)("div",{className:"header-bottom-left",children:t}),Object(A.jsxs)("div",{className:"header-bottom-right",children:[Object(A.jsx)("span",{children:this.state.currentTime}),Object(A.jsx)("img",{src:this.state.dayPictureUrl,alt:"weather"}),Object(A.jsx)("span",{children:this.state.weather})]})]})]})}}]),n}(r.Component),ee=Object(h.g)(Y),te=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(A.jsx)("div",{children:"\u6b22\u8fce\u4f7f\u7528\u597d\u5b69\u5b50\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"})}}]),n}(r.Component),ne=n(306),re=n(305),ae=n(314),ce=n(182),se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={categorys:[],subCategorys:[],loading:!1,parentId:"0",parentName:""},e.initColumns=function(){e.columns=[{title:"\u5206\u7c7b\u7684\u540d\u79f0",dataIndex:"name"},{title:"\u64cd\u4f5c",width:300,render:function(t){return Object(A.jsxs)("span",{children:[Object(A.jsx)(Q,{children:"\u4fee\u6539\u5206\u7c7b"}),"0"===e.state.parentId?Object(A.jsx)(Q,{onClick:function(){return e.showSubCategorys(t)},children:"\u67e5\u770b\u5b50\u5206\u7c7b"}):null]})}}]},e.getCategorys=Object(p.a)(d.a.mark((function t(){var n,r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=e.state.parentId,t.next=4,S(n);case 4:r=t.sent,e.setState({loading:!1}),0===r.status?(a=r.data,"0"===n?e.setState({categorys:a}):e.setState({subCategorys:a})):O.b.error("\u83b7\u53d6\u5206\u7c7b\u5217\u8868\u5931\u8d25");case 7:case"end":return t.stop()}}),t)}))),e.showCategorys=function(){e.setState({parentId:"0",parentName:"",subCategorys:[]})},e.showSubCategorys=function(t){e.setState({parentId:t._id,parentName:t.name},(function(){e.getCategorys()}))},e}return Object(o.a)(n,[{key:"componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getCategorys()}},{key:"render",value:function(){var e=this.state,t=e.categorys,n=e.loading,r=e.parentId,a=e.subCategorys,c=e.parentName,s="0"===r?"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868":Object(A.jsxs)("span",{children:[Object(A.jsx)(Q,{onClick:this.showCategorys,children:"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"}),Object(A.jsx)(ae.a,{style:{marginRight:"5px"}}),Object(A.jsx)("span",{children:c})]}),i=Object(A.jsxs)(g.a,{type:"primary",children:[Object(A.jsx)(ce.a,{}),"\u6dfb\u52a0"]});return Object(A.jsx)(ne.a,{title:s,extra:i,children:Object(A.jsx)(re.a,{bordered:!0,rowKey:"_id",loading:n,columns:this.columns,dataSource:"0"===r?t:a,pagination:{defaultPageSize:5,showQuickJumper:!0}})})}}]),n}(r.Component),ie=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(A.jsx)("div",{})}}]),n}(r.Component),oe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(A.jsx)("div",{})}}]),n}(r.Component),le=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(A.jsx)("div",{children:"user"})}}]),n}(r.Component),ue=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(A.jsx)("div",{})}}]),n}(r.Component),je=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(A.jsx)("div",{})}}]),n}(r.Component),he=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(A.jsx)("div",{})}}]),n}(r.Component),be=z.a.Footer,de=z.a.Sider,pe=z.a.Content,Oe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=I.user;return e&&e._id?Object(A.jsxs)(z.a,{style:{height:"100%"},children:[Object(A.jsx)(de,{children:Object(A.jsx)(X,{})}),Object(A.jsxs)(z.a,{children:[Object(A.jsx)(ee,{children:"Header"}),Object(A.jsx)(pe,{style:{margin:20,backgroundColor:"#fff"},children:Object(A.jsxs)(h.d,{children:[Object(A.jsx)(h.b,{path:"/home",component:te}),Object(A.jsx)(h.b,{path:"/category",component:se}),Object(A.jsx)(h.b,{path:"/product",component:ie}),Object(A.jsx)(h.b,{path:"/role",component:oe}),Object(A.jsx)(h.b,{path:"/user",component:le}),Object(A.jsx)(h.b,{path:"/charts/bar",component:ue}),Object(A.jsx)(h.b,{path:"/charts/line",component:je}),Object(A.jsx)(h.b,{path:"/charts/pie",component:he}),Object(A.jsx)(h.a,{to:"/home"})]})}),Object(A.jsx)(be,{style:{textAlign:"center",color:"#ccc"},children:"Footer"})]})]}):Object(A.jsx)(h.a,{to:"/login"})}}]),n}(r.Component),me=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(A.jsx)(j.a,{children:Object(A.jsxs)(h.d,{children:[Object(A.jsx)(h.b,{path:"/login",component:U}),Object(A.jsx)(h.b,{path:"/",component:Oe})]})})}}]),n}(r.Component),fe=E();I.user=fe,s.a.render(Object(A.jsx)(me,{}),document.getElementById("root"))}},[[302,1,2]]]);
//# sourceMappingURL=main.6f62f84e.chunk.js.map